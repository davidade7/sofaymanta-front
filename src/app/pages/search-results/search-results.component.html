<div class="search-results-container">
  <h1>Résultats pour "{{ searchQuery }}"</h1>

  <div *ngIf="loading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Recherche en cours...</p>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error" class="results-container">
    <p class="results-count" *ngIf="searchResults.length > 0">
      {{ searchResults.length }} résultat(s) trouvé(s)
    </p>

    <!-- Films -->
    <div *ngIf="movies.length > 0" class="category-container">
      <div class="category-header">
        <lucide-icon [img]="Film"></lucide-icon>
        <h2>Films ({{ movies.length }})</h2>
      </div>

      <div class="items-grid">
        <div *ngFor="let movie of movies" class="result-item" [routerLink]="['/movie', movie.id]">
          <div class="poster-container">
            <img [src]="getImageUrl(movie.poster_path)" [alt]="movie.title" class="poster-image">
          </div>
          <div class="item-details">
            <h3>{{ movie.title }}</h3>
            <p class="release-date" *ngIf="movie.release_date">{{ movie.release_date | date:'yyyy' }}</p>
            <p class="rating" *ngIf="movie.vote_average">
              <span class="star">★</span>
              {{ movie.vote_average | number:'1.1-1' }}/10
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Séries TV -->
    <div *ngIf="tvShows.length > 0" class="category-container">
      <div class="category-header">
        <lucide-icon [img]="Tv"></lucide-icon>
        <h2>Séries TV ({{ tvShows.length }})</h2>
      </div>

      <div class="items-grid">
        <div *ngFor="let show of tvShows" class="result-item" [routerLink]="['/tv', show.id]">
          <div class="poster-container">
            <img [src]="getImageUrl(show.poster_path)" [alt]="show.name" class="poster-image">
          </div>
          <div class="item-details">
            <h3>{{ show.name }}</h3>
            <p class="release-date" *ngIf="show.first_air_date">{{ show.first_air_date | date:'yyyy' }}</p>
            <p class="rating" *ngIf="show.vote_average">
              <span class="star">★</span>
              {{ show.vote_average | number:'1.1-1' }}/10
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Personnes -->
    <div *ngIf="people.length > 0" class="category-container">
      <div class="category-header">
        <lucide-icon [img]="Users"></lucide-icon>
        <h2>Personnes ({{ people.length }})</h2>
      </div>

      <div class="items-grid">
        <div *ngFor="let person of people" class="result-item" [routerLink]="['/person', person.id]">
          <div class="poster-container">
            <img [src]="getImageUrl(person.profile_path)" [alt]="person.name" class="poster-image">
          </div>
          <div class="item-details">
            <h3>{{ person.name }}</h3>
            <p class="known-for" *ngIf="person.known_for_department">{{ person.known_for_department }}</p>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="!hasResults()" class="no-results">
      <p>Aucun résultat trouvé pour "{{ searchQuery }}".</p>
      <p>Essayez avec d'autres termes de recherche.</p>
    </div>
  </div>
</div>
