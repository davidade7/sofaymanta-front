<div class="search-results-container">
  <app-search-input></app-search-input>

  <h1>Resultados para "{{ searchQuery }}"</h1>

  <div *ngIf="loading" class="loading-container">
    <div class="loading-spinner"></div>
    <p>Búsqueda en curso...</p>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error" class="results-container">
    <p class="results-count" *ngIf="searchResults.length > 0">
      {{ searchResults.length }} resultado(s) encontrado(s)
    </p>

    <!-- Películas -->
    <div *ngIf="movies.length > 0" class="category-container">
      <div class="category-header">
        <lucide-icon [img]="Film"></lucide-icon>
        <h2>Películas ({{ movies.length }})</h2>
      </div>

      <div class="items-grid">
        <app-movie-card
          *ngFor="let movie of movies"
          [movie]="movie"
          (cardClick)="navigateToDetail('movie', movie.id)">
        </app-movie-card>
      </div>
    </div>

    <!-- Series TV -->
    <div *ngIf="tvShows.length > 0" class="category-container">
      <div class="category-header">
        <lucide-icon [img]="Tv"></lucide-icon>
        <h2>Series TV ({{ tvShows.length }})</h2>
      </div>

      <div class="items-grid">
        <div *ngFor="let show of tvShows" class="result-item" (click)="navigateToDetail('tv', show.id)">
          <div class="poster-container">
            <img [src]="getImageUrl(show.poster_path)" [alt]="show.name" class="poster-image">
          </div>
          <div class="item-details">
            <h3>{{ show.name }}</h3>
            <p class="release-date" *ngIf="show.first_air_date">{{ show.first_air_date | date:'yyyy' }}</p>
            <p class="rating" *ngIf="show.vote_average">
              <span class="star">★</span>
              {{ show.vote_average | number:'1.1-1' }}/10
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Personas -->
    <div *ngIf="people.length > 0" class="category-container">
      <div class="category-header">
        <lucide-icon [img]="Users"></lucide-icon>
        <h2>Personas ({{ people.length }})</h2>
      </div>

      <div class="items-grid">
        <div *ngFor="let person of people" class="result-item" [routerLink]="['/person', person.id]">
          <div class="poster-container">
            <img [src]="getImageUrl(person.profile_path)" [alt]="person.name" class="poster-image">
          </div>
          <div class="item-details">
            <h3>{{ person.name }}</h3>
            <p class="known-for" *ngIf="person.known_for_department">{{ person.known_for_department }}</p>
          </div>
        </div>
      </div>
    </div>

    <div *ngIf="!hasResults()" class="no-results">
      <p>No se encontraron resultados para "{{ searchQuery }}".</p>
      <p>Intente con otros términos de búsqueda.</p>
    </div>
  </div>
</div>
